apiVersion: v1
kind: ConfigMap
metadata:
  name: gha-runner-scale-set-values-base
  namespace: gha-runner-scale-set
data:
  values.yaml: |
    githubConfigUrl: "https://github.com/power-Igor/test-java-runner"
    githubConfigSecret: "gha-github-pat"

    runnerScaleSetName: "arc-java"
    minRunners: 1
    maxRunners: 2

    controllerServiceAccount:
      name: gha-runner-scale-set-controller-sa
      namespace: gha-runner-scale-set-controller

    containerMode:
      type: dind

    template:
      spec:
        tolerations:
          - key: "node-role.kubernetes.io/control-plane"
            operator: "Exists"
            effect: "NoSchedule"
          - key: "node-role.kubernetes.io/master"   # older clusters
            operator: "Exists"
            effect: "NoSchedule"
        imagePullSecrets:
          - name: docker-hub-cred
        containers:
          - name: runner
            image: "docker.io/19901/runner-java:1.0.0"  
            env:
              - name: RUNNER_LABELS
                value: "arc,java"
              - name: RUNNER_WAIT_FOR_DOCKER_IN_SECONDS
                value: "120"
            resources:
              requests:
                cpu: "200m"
                memory: "256Mi"
              limits:
                cpu: "1"
                memory: "1Gi"
